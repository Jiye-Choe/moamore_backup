<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <!-- namespace -->
  <mapper namespace="report">
  	<!-- 예산번호로 그 예산에 대한 총 소비액 구하기 -->
  	<select id="selectOutcomeSumByBudgetId"  parameterType="int" resultType="int">
  		SELECT sum(amount) FROM budget WHERE BUDGET_NO=#{value}
  	</select>
  	
  	<!-- 오늘 소비한 카테고리별 금액 -->
  	<select id="selectTodayOutcome" parameterType="hashmap" resultType="int">
  		select sum(amount) from budget where budget_no=#{budget_no} and category_no=#{category_no} and reg >= TO_CHAR(SYSDATE, 'YYYYMMDD')
  	</select>
  	
  	<!-- 회원의 지난 모든 예산정보를 날짜 내림차순으로 정렬해서 가져오기-->
	<select id="selectAllOrderByReg" parameterType="string" resultType="totalBudgetDTO" >
		select * from total_budget where id=#{value} and close !=0 order by end_day desc
	</select>
  </mapper>
 